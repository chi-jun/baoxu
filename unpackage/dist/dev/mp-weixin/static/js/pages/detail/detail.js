global.webpackJsonp([4],{14:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"container clearfix"},[s("view",{class:t.datum.status_class},[s("view",{staticClass:"head-img"},[s("image",{attrs:{src:t.datum.head_img}})]),t._v(" "),s("view",{staticClass:"head-con"},[s("text",[t._v(t._s(t.datum.nick_name))]),t._v(" "),s("text",[t._v(t._s(t.datum.building_name)+" / "+t._s(t.datum.room_name))])])]),t._v(" "),s("view",{staticClass:"video-wrap"}),t._v(" "),s("view",{staticClass:"time"},[t._v(t._s(t.datum.ut))]),t._v(" "),s("view",{staticClass:"reply-wrap"},[s("view",{staticClass:"reply-info",attrs:{"v:if":"alist.length == 0"}},[t._v("暂无回复")]),t._v(" "),s("view",{key:t.index,staticClass:"reply-list",attrs:{"v:if":"alist.length != 0","v:for":"(item, index) in alist"}},[s("view",{staticClass:"reply-head"},[s("image",{attrs:{src:t.item.head_img}})]),t._v(" "),s("view",{staticClass:"reply-head-con"},[s("text",[t._v(t._s(t.item.fromU))]),t._v(" "),s("text",[t._v(t._s(t.item.ut))])]),t._v(" "),s("view",{staticClass:"reply-con"},[s("text",[t._v(t._s(t.item.reply_desc))]),t._v(" "),s("view",{key:t.index2,staticClass:"img-box",attrs:{"v:if":"item.reply_imgs.length > 0","v:for":"(obj, index2)  in item.reply_imgs"}},[s("image",{attrs:{src:t.current,bindtap:"changePreview","data-src":t.current,"data-arr":t.item.reply_imgs}})])])])]),t._v(" "),t._m(0)])};a._withStripped=!0;var i={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"footer"},[e("text",{attrs:{catchtap:"reminder"}},[this._v("催单")]),this._v(" "),e("text",{attrs:{catchtap:"complaint"}},[this._v("投诉建议")])])}]};e.a=i},17:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(s(1)),i=o(s(6));function o(t){return t&&t.__esModule?t:{default:t}}s(0).default;new a.default(i.default).$mount(),e.default={config:{navigationBarTitleText:"工单详情"}}},23:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s(0).default;var a=s(3).utils;e.default={data:{datum:{head_img:"",nick_name:"",building_name:"",room_name:"",ut:""},alist:[]},onLoad:function(t){this.getReportDetails(t.school_id,t.fault_id)},methods:{getReportDetails:function(t,e){a.requestGet("getmodifydetail/"+t+"/"+e,function(t){if(0==t.code){var e=t.data[0];console.log(e.status)}})},getReplyToList:function(t,e){var s=this,i="getreplylist/"+t+"/"+e;a.requestGet(i,function(t){if(200===t.statusCode&&0===t.data.code)if(t.data.data.length>0){var e=[],a=t.data.data;a.forEach(function(t,s,i){if(-1!==t.reply_desc.indexOf("<br />")&&(a[s].reply_desc=a[s].reply_desc.replace("<br />","\n")),""!==t.reply_imgs){i=t.reply_imgs.split(",");for(var o in i)e.push(i[o]);a[s].reply_imgs=e}}),s.setData({alist:a})}else s.setData({alist:[]})})},changePreview:function(t){var e=t.currentTarget.dataset.src,s=t.currentTarget.dataset.arr;wx.previewImage({current:e,urls:s})},reminder:function(){var t=this.data.adminInfo;if(console.log(t),t.school_id&&t.fault_id){var e="https://www."+util.host+"/usr/"+t.userid+"/"+t.session+"/operation/speedup/"+t.school_id+"/"+t.fault_id;console.log(e),wx.showModal({title:"催单",content:"确认催促检修员加速处理吗？",success:function(t){t.confirm?(console.log("用户点击确定"),wx.request({url:e,data:"",header:{},method:"GET",dataType:"json",responseType:"text",success:function(t){console.log(t),200===t.statusCode&&0===t.data.code?(console.log(t,"催单成功"),wx.showToast({title:"催单成功!",icon:"success"})):-2===t.data.code&&wx.showToast({title:t.data.msg,icon:"none",duration:2e3})},fail:function(t){console.log(t,"催单失败!")},complete:function(t){}})):t.cancel&&console.log("用户点击取消")}})}},commentroll:function(){var t=this.data.adminInfo,e="https://www."+util.host+"/usr/"+t.userid+"/"+t.session+"/operation/checkscored/"+t.school_id+"/"+t.fault_id;""!==t&&wx.request({url:e,data:"",header:{},method:"GET",dataType:"json",responseType:"text",success:function(e){if(200===e.statusCode&&0===e.data.code)if(0===e.data.data.length){console.log("需要评论!");var s="../comment/comment?userid="+t.userid+"&session="+t.session+"&school_id="+t.school_id+"&recid="+t.fault_id;setTimeout(function(){wx.navigateTo({url:s})},1e3)}else console.log("暂不需要评论!");else console.log(e,"信息获取有误!")},fail:function(t){console.log(t,"获取是否需要评论接口失败!")},complete:function(t){}})},complaint:function(){var t=this.data.adminInfo;if(""!==t){var e="../complaint/complaint?submitpath="+("https://www."+util.host+"/usr/"+t.userid+"/"+t.session+"/operation/postsuggest")+"&school_id="+t.school_id+"&rec_id="+t.fault_id;wx.navigateTo({url:e})}}}}},32:function(t,e){},6:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(23),i=s.n(a),o=s(14),n=!1;var r=function(t){n||s(32)},l=s(2)(i.a,o.a,r,null,null);l.options.__file="..\\..\\..\\..\\Documents\\HBuilderProjects\\Supplier-Eng\\pages\\detail\\detail.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] detail.vue: functional components are not supported with templates, they should use render functions."),e.default=l.exports}},[17]);
//# sourceMappingURL=../../../../.sourcemap/pages/detail/detail.js.map