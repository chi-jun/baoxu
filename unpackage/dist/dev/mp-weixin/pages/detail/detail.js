require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([13],{28:function(t,e,s){"use strict";var i=n(s(0)),o=n(s(29));function n(t){return t&&t.__esModule?t:{default:t}}new i.default(o.default).$mount()},29:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(31),o=s.n(i),n=s(32),a=!1;var l=function(t){a||s(30)},c=s(1)(o.a,n.a,l,null,null);c.options.__file="..\\..\\..\\..\\..\\allen\\project\\School-Admin\\pages\\detail\\detail.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] detail.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},30:function(t,e){},31:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=s(3).utils;e.default={data:function(){return{status_class:"",lists:[],alist:[],statu:"",file_type:"",unfold:{unfold1:!1,unfold2:!1,unfold3:!1},showModal:!1,showActionSheet:!1,reply_desc:"",rec_id:"",to_user:"",building_id:"",room_id:""}},onLoad:function(t){this.rec_id=t.fault_id,this.getReportDetails(t.fault_id),this.getReplyToList(t.fault_id)},methods:{getReportDetails:function(t){var e=this;i.requestGet("operation/getmodifydetail/"+t,function(t){if(0==t.code){var s=t.data[0];e.statu=s.status,e.to_user=s.user_id,e.building_id=s.building_id,s.ut=i.formatTimeStr(s.ut),e.status_class="header state"+s.status,e.lists=s,e.room_id=s.room_id}})},getReplyToList:function(t){var e=this,s="operation/getreplylist/"+t;i.requestGet(s,function(t){if(0==t.code){var s=t.data;for(var o in s)s[o].ut=i.formatTimeStr(s[o].ut);e.alist=s}})},changePreview:function(e){t.previewImage({urls:e})},preview:function(e){var s=[];s.push(e),t.previewImage({urls:s})},unfoldMenu:function(t){1===t&&(this.unfold.unfold2=!1,this.unfold.unfold3=!1,this.unfold.unfold1=!this.unfold.unfold1),2===t&&(this.unfold.unfold1=!1,this.unfold.unfold3=!1,this.unfold.unfold2=!this.unfold.unfold2),3===t&&(this.unfold.unfold1=!1,this.unfold.unfold2=!1,this.unfold.unfold3=!this.unfold.unfold3)},reply:function(){this.closeMenu(),t.navigateTo({url:"../course/course?to_user="+this.to_user+"&rec_id="+this.rec_id})},closeMenu:function(){this.unfold.unfold1=!1,this.unfold.unfold2=!1,this.unfold.unfold3=!1},ido:function(){this.closeMenu(),t.navigateTo({url:"../designate/designate?building_id="+this.building_id+"&to_user="+this.to_user+"&rec_id="+this.rec_id})},sureFaultDevice:function(){var e=this;e.closeMenu(),t.showModal({title:"操作确认",content:"确认更新检修状态为检修待续吗？",success:function(t){if(t.confirm)if(1===e.statu||0===e.lists.file_type){var s={status:1,reply_imgs:"",reply_desc:"您报告的故障已得到确认，但需要一段时间进行修复，请您耐心等待。修复好后，系统会及时通知您。",to_user:e.to_user,rec_id:e.rec_id};i.requestPost("operation/postreply",s,function(t){0===t.code&&(console.log(t.data),e.getReplyToList(e.rec_id),e.getReportDetails(e.rec_id))})}else e.showDialogBtn(2)}})},otherdo:function(){var e=this;e.closeMenu(),t.showModal({title:"操作确认",content:"确认更新检修状态为已完成吗？",success:function(t){if(t.confirm)if(1===e.statu||0===e.lists.file_type){console.log("用户点击确定");var s={status:2,reply_imgs:"",reply_desc:"经过我们的努力，您报告的故障已经检修完成。",to_user:e.to_user,rec_id:e.rec_id};i.requestPost("operation/postreply",s,function(t){0===t.code&&(console.log(t.data),e.getReplyToList(e.rec_id),e.getReportDetails(e.rec_id))})}else e.showDialogBtn(2);else t.cancel&&console.log("用户点击取消")}})},showDialogBtn:function(t){this.closeMenu(),2===t&&(this.showActionSheet=!0),1===t&&(this.showModal=!0)},inputChange:function(t){this.reply_desc=t.detail.value},preventTouchMove:function(){},hideModal:function(t){2===t&&(this.showActionSheet=!1),1===t&&(this.showModal=!1)},onCancel:function(){this.hideModal(1)},onConfirm:function(){var t=this,e={status:9,reply_desc:t.reply_desc,to_user:t.to_user,reply_imgs:"",rec_id:t.rec_id};i.requestPost("operation/postreply",e,function(e){0===e.code&&(console.log(e.data),t.getReplyToList(t.rec_id))}),this.hideModal(1)},complaint:function(){this.closeMenu(),t.navigateTo({url:"../device/device"})},notarizeFault:function(){this.showActionSheet=!1,t.navigateTo({url:"../fault/fault?to_user="+this.to_user+"&rec_id="+this.rec_id+"&room_id="+this.room_id})},misinformation:function(){var e=this;e.showActionSheet=!1,t.showModal({title:"操作确认",content:"确认更新检修状态为误报吗？",success:function(t){if(t.confirm){var s={status:3,reply_imgs:"",reply_desc:"您报告的故障经检查不属实,系统将结束本次报修。",to_user:e.to_user,rec_id:e.rec_id};i.requestPost("operation/postreply",s,function(t){0===t.code&&(e.getReportDetails(e.rec_id),e.getReplyToList(e.rec_id))})}}})}}}}).call(e,s(2).default)},32:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"content"},[s("view",{staticClass:"container clearfix"},[s("view",{staticClass:"header",class:"state"+t.lists.status},[s("view",{staticClass:"head-img"},[s("image",{attrs:{src:t.lists.head_img?t.lists.head_img:"http://tuofu.likonget.com/operation/img/teacher.png"}})]),s("view",{staticClass:"head-con"},[s("text",[t._v(t._s(t.lists.nick_name?t.lists.nick_name:"匿名用户"))]),s("text",[t._v(t._s(t.lists.building_name)+" / "+t._s(t.lists.room_name))])])]),s("view",{staticClass:"title"},[t._v("\n\t\t\t"+t._s(t.lists.fault_desc)+"\n\t\t")]),t.lists.imgs?s("view",{staticClass:"video-wrap"},[1==t.lists.file_type&&t.lists.imgs.length>0?s("view",{staticClass:"item-images"},t._l(t.lists.imgs,function(e,i){return s("image",{key:i,attrs:{src:e,eventid:"XZ5-0-"+i},on:{tap:function(e){t.changePreview(t.lists.imgs)}}})})):t._e(),0==t.lists.file_type&&t.lists.imgs.length>0?s("view",{staticClass:"video-preview"},[s("image",{attrs:{src:t.lists.preview_img}}),t._m(0)]):t._e()]):t._e(),s("view",{staticClass:"time"},[t._v(t._s(t.lists.ut))]),s("view",{class:"2"!=t.statu?"warp":"reply-wrap"},[0==t.alist.length?s("view",{staticClass:"reply-info"},[t._v("暂无回复")]):t._e(),t._l(t.alist,function(e,i){return 0!=t.alist.length?s("view",{key:i,staticClass:"reply-list"},[s("view",{staticClass:"reply-head"},[s("image",{attrs:{src:e.head_img?e.head_img:"http://tuofu.likonget.com/operation/img/teacher.png"}})]),s("view",{staticClass:"reply-head-con"},[s("text",[t._v(t._s(e.fromU?e.fromU:"匿名用户"))]),s("text",[t._v(t._s(e.ut))])]),s("view",{staticClass:"reply-con"},[s("view",{domProps:{innerHTML:t._s(e.reply_desc)}}),e.reply_imgs.length>0?s("view",{staticClass:"img-box"},[s("image",{attrs:{src:e.reply_imgs,eventid:"4Xu-1-"+i},on:{tap:function(s){t.preview(e.reply_imgs)}}})]):t._e()])]):t._e()})],2),t.showModal?s("view",{staticClass:"modal-mask",attrs:{catchtouchmove:"preventTouchMove",eventid:"f4H-2"},on:{tap:function(e){t.hideModal(1)}}}):t._e(),t.showModal?s("view",{staticClass:"modal-dialog"},[s("view",{staticClass:"modal-title"},[t._v("请输入预约处理时间")]),s("view",{staticClass:"modal-content"},[s("view",{staticClass:"modal-input"},[s("textarea",{staticClass:"input",attrs:{"placeholder-class":"input-holder",type:"number",eventid:"Cf7-3"},on:{input:t.inputChange}})])]),s("view",{staticClass:"modal-footer"},[s("view",{staticClass:"btn-cancel",attrs:{"data-status":"cancel","hover-class":"uni-list-cell-hover",eventid:"WGY-4"},on:{tap:t.onCancel}},[t._v("取消")]),s("view",{staticClass:"btn-confirm",attrs:{"data-status":"confirm","hover-class":"uni-list-cell-hover",eventid:"Xop-5"},on:{tap:t.onConfirm}},[t._v("确定")])])]):t._e(),t.showActionSheet?s("view",{staticClass:"modal-mask",attrs:{catchtouchmove:"preventTouchMove",eventid:"IYO-6"},on:{tap:function(e){t.hideModal(2)}}}):t._e(),t.showActionSheet?s("view",{staticClass:"fault"},[s("view",{staticClass:"fault-title"},[t._v("\n\t\t\t\t请确认是否有故障\n\t\t\t")]),s("view",{staticClass:"fault-wb",attrs:{"hover-class":"uni-list-cell-hover",eventid:"vHd-7"},on:{tap:t.misinformation}},[t._v("\n\t\t\t\t确认误报\n\t\t\t")]),s("view",{staticClass:"fault-gz",attrs:{"hover-class":"uni-list-cell-hover",eventid:"NWL-8"},on:{tap:t.notarizeFault}},[t._v("\n\t\t\t\t确认有故障\n\t\t\t")]),s("view",{staticClass:"fault-zb",attrs:{eventid:"yi7-9"},on:{tap:function(e){t.hideModal(2)}}},[t._v("\n\t\t\t\t暂不确认\n\t\t\t")])]):t._e()]),2===t.statu?s("view",{staticClass:"button",attrs:{"hover-class":"button-hover"}},[s("button",{staticClass:"mini-btn",attrs:{size:"mini"}},[t._v("评价")])],1):t._e(),2!=t.statu&&3!=t.statu?s("view",{staticClass:"footer"},[s("view",{staticClass:"info-text"},[s("view",{staticClass:"item-text",attrs:{"hover-class":"uni-list-cell-hover",eventid:"Uq1-10"},on:{tap:function(e){t.unfoldMenu(1)}}},[s("view",{staticClass:"text"},[t._v("\n\t\t\t\t\t跟踪处理\n\t\t\t\t")]),t._m(1)]),t.unfold.unfold1?s("view",{staticClass:"item-top"},[s("view",{attrs:{"hover-class":"uni-list-cell-hover",eventid:"oJN-11"},on:{tap:t.reply}},[t._v("过程记录")]),s("view",{attrs:{"hover-class":"uni-list-cell-hover",eventid:"5dy-12"},on:{tap:function(e){t.showDialogBtn(1)}}},[t._v("我来处理")]),s("view",{attrs:{"hover-class":"uni-list-cell-hover",eventid:"gZT-13"},on:{tap:t.ido}},[t._v("指派处理")]),s("view",{attrs:{"hover-class":"uni-list-cell-hover",eventid:"e3a-14"},on:{tap:function(e){t.showDialogBtn(2)}}},[t._v("确认故障")])]):t._e()]),s("view",{staticClass:"info-text"},[s("view",{staticClass:"item-text",attrs:{"hover-class":"uni-list-cell-hover",eventid:"aUi-15"},on:{tap:function(e){t.unfoldMenu(2)}}},[s("view",{staticClass:"text"},[t._v("\n\t\t\t\t\t状态更新\n\t\t\t\t")]),t._m(2)]),t.unfold.unfold2?s("view",{staticClass:"item-top"},[s("view",{attrs:{"hover-class":"uni-list-cell-hover",eventid:"Iz1-16"},on:{tap:t.sureFaultDevice}},[t._v("检修待续")]),s("view",{attrs:{"hover-class":"uni-list-cell-hover",eventid:"j5G-17"},on:{tap:t.otherdo}},[t._v("检修完成")])]):t._e()]),s("view",{staticClass:"info-text"},[s("view",{staticClass:"item-text",attrs:{"hover-class":"uni-list-cell-hover",eventid:"1p9-18"},on:{tap:function(e){t.unfoldMenu(3)}}},[s("view",{staticClass:"text"},[t._v("\n\t\t\t\t\t更多\n\t\t\t\t")]),t._m(3)]),t.unfold.unfold3?s("view",{staticClass:"item-top"},[s("view",{attrs:{"hover-class":"uni-list-cell-hover",eventid:"ANg-19"},on:{tap:t.complaint}},[t._v("举报违规内容")])]):t._e()])]):t._e()])};i._withStripped=!0;var o={render:i,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticStyle:{position:"relative"}},[e("view",{staticClass:"play-container"},[e("text",{staticClass:"iconfont icon-play2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",[e("view",{staticClass:"uni-icon-bars uni-icon icons"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",[e("view",{staticClass:"uni-icon-bars icons uni-icon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",[e("view",{staticClass:"uni-icon-bars uni-icon icons"})])}]};e.a=o}},[28]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/detail/detail.js.map