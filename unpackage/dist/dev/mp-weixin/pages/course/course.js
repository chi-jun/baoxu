require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([16],{33:function(e,t,s){"use strict";var i=a(s(0)),n=a(s(34));function a(e){return e&&e.__esModule?e:{default:e}}new i.default(n.default).$mount()},34:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(36),n=s.n(i),a=s(39),o=!1;var r=function(e){o||s(35)},u=s(1)(n.a,a.a,r,null,null);u.options.__file="..\\..\\..\\..\\..\\allen\\project\\School-Admin\\pages\\course\\course.vue",u.esModule&&Object.keys(u.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),u.options.functional&&console.error("[vue-loader] course.vue: functional components are not supported with templates, they should use render functions."),t.default=u.exports},35:function(e,t){},36:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,n=s(5),a=(i=n)&&i.__esModule?i:{default:i};var o=s(3).utils;t.default={data:function(){return{title:"textarea",focus:!1,num:0,reply_desc:"",imageList:[],reply_imgs:"",to_user:"",rec_id:"",tempFilePaths:""}},onLoad:function(e){this.rec_id=e.rec_id,this.to_user=e.to_user},methods:{getRecord:function(e){var t=e.target.dataset.idx;this.imageList.splice(t,1)},getLeng:function(e){this.num=e.detail.value.length,this.reply_desc=e.detail.value},chooseImage:function(){var t,s=(t=a.default.mark(function t(){var s,i=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(9!==this.imageList.length){t.next=7;break}return t.next=3,this.isFullImg();case 3:if(s=t.sent,console.log("是否继续?",s),s){t.next=7;break}return t.abrupt("return");case 7:e.chooseImage({sizeType:["original"],success:function(e){console.log(JSON.stringify(e.tempFilePaths)),i.tempFilePaths=e.tempFilePaths[0],i.imageList=i.imageList.concat(e.tempFilePaths)}});case 8:case"end":return t.stop()}},t,this)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(n,a){try{var o=e[n](a),r=o.value}catch(e){return void s(e)}if(!o.done)return Promise.resolve(r).then(function(e){i("next",e)},function(e){i("throw",e)});t(r)}("next")})});return function(){return s.apply(this,arguments)}}(),isFullImg:function(){var t=this;return new Promise(function(s){e.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(e){e.confirm?(t.imageList=[],s(!0)):s(!1)},fail:function(){s(!1)}})})},getSubmit:function(){if(0===this.num)e.showToast({title:"请输入回复内容",duration:2e3,icon:"none"});else{var t=this;if(0===t.imageList.length){var s={action:"reply",status:9,reply_imgs:t.reply_imgs,reply_desc:t.reply_desc,to_user:t.to_user,rec_id:t.rec_id};o.requestPost("operation/postreply",s,function(t){0===t.code&&e.navigateBack({delta:1})})}else e.showToast({title:"正在上传图片",duration:800,icon:"none"}),e.uploadFile({url:"https://"+o.host+"/weixinweb/xiaochengcxufile/1",filePath:t.tempFilePaths,name:"upfile",success:function(s){var i=JSON.parse(s.data);t.reply_imgs=i.url,console.log(t.reply_imgs);var n={action:"reply",status:9,reply_imgs:t.reply_imgs,reply_desc:t.reply_desc,to_user:t.to_user,rec_id:t.rec_id};o.requestPost("operation/postreply",n,function(t){0===t.code&&e.navigateBack({delta:1})})}})}}}}}).call(t,s(2).default)},39:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"coures"},[s("view",{staticClass:"page-section"},[s("view",{staticClass:"page-section-title"},[e._v("记录内容")]),s("view",{staticClass:"textarea-wrp"},[s("textarea",{staticClass:"textare",attrs:{"placeholder-style":"color:#888888",placeholder:"请输入记录内容",maxlength:"200",eventid:"lgm-0"},on:{input:e.getLeng}})]),s("view",{staticClass:"nums"},[s("view",{staticClass:"num"},[e._v("\n\t\t\t\t"+e._s(e.num)+"/200\n\t\t\t")])]),s("view",{staticClass:"page-section-title"},[e._v("相关照片")]),s("view",{staticClass:"picture"},[s("view",{staticClass:"uni-uploader__files"},e._l(e.imageList,function(t,i){return s("block",{key:i},[s("view",{staticClass:"uni-uploader__file attention"},[s("image",{staticClass:"uploader-img",attrs:{src:t,"data-src":t}}),s("view",{staticClass:"uni-icon-minus-filled uni-icon jians",attrs:{"data-idx":i,eventid:"Msg-1-"+i},on:{tap:e.getRecord}})])])})),s("view",{staticClass:"uni-uploader"},[s("view",{staticClass:"uploader-input",attrs:{eventid:"cW1-2"},on:{tap:e.chooseImage}},[s("image",{attrs:{src:"../../static/img/photo.png",mode:""}})])])])]),s("view",{staticClass:"button",attrs:{"hover-class":"button-hover"}},[s("button",{staticClass:"mini-btn",attrs:{size:"mini",eventid:"d5I-3"},on:{tap:e.getSubmit}},[e._v("提交")])],1)])};i._withStripped=!0;var n={render:i,staticRenderFns:[]};t.a=n}},[33]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/course/course.js.map