require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([5],{23:function(t,e,s){"use strict";var a=n(s(0)),i=n(s(24));function n(t){return t&&t.__esModule?t:{default:t}}new a.default(i.default).$mount()},24:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(26),i=s.n(a),n=s(27),r=!1;var o=function(t){r||s(25)},c=s(1)(i.a,n.a,o,null,null);c.options.__file="..\\..\\..\\..\\..\\allen\\project\\School-Admin\\pages\\repairs\\repairs.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] repairs.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},25:function(t,e){},26:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a=s(3).utils;e.default={data:function(){return{tabs:[{name:"全部",active:!0,status:0,page:0,loading:!1},{name:"待受理",active:!1,status:1,page:0,loading:!1},{name:"已受理",active:!1,status:2,page:0,loading:!1},{name:"处理中",active:!1,status:10,page:0,loading:!1},{name:"已完成",active:!1,status:3,page:0,loading:!1}],content_height:0,taskList:[],selectedIndex:0}},onLoad:function(e){var s=this,a=[];for(var i in this.tabs)a.push([]);switch(this.taskList=a,e.type){case 1:this.tag="task-status status-doing",this.status_str="处理中";break;case 2:this.tag="task-status status-finish",this.status_str="已完成"}t.getSystemInfo({success:function(t){s.content_height=t.windowHeight-36}}),this.getOrders(0)},onReachBottom:function(){},methods:{tapNav:function(t){for(var e in this.selectedIndex=t,this.tabs)this.tabs[e].active=e==t+"";this.getOrders(t)},lower:function(t){this.getOrders(parseInt(t.currentTarget.id.replace("tab","")))},getOrders:function(t){var e=this;!function(t){a.requestGet("operation/getmodifylist/"+e.tabs[t].page+"/"+e.tabs[t].status,function(s){if(0==s.code){var i=s.data;if(i.length>0){e.tabs[t].page++;for(var n in i)switch(i[n].ut=a.formatTimeStr(i[n].ut),i[n].status){case 0:i[n].status_str="待受理",i[n].tag="undo";break;case 1:i[n].status_str="已受理",i[n].tag="doing";break;case 2:i[n].status_str="已完成",i[n].tag="finish";break;case 3:i[n].status_str="误报",i[n].tag="finish";break;case 9:i[n].status_str="处理中",i[n].tag="doing";break;default:i[n].status_str=""}var r=e.taskList[t].concat(i);e.taskList.splice(t,1,r)}}})}(t)},goDetail:function(e){t.getStorage({key:"userinfo",success:function(s){var a=JSON.parse(s.data).schools[0].id;t.navigateTo({url:"../detail/detail?school_id="+a+"&fault_id="+e})}})},changePreview:function(e){t.previewImage({urls:e})}}}}).call(e,s(2).default)},27:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:"index"},[s("view",{staticClass:"nav"},t._l(t.tabs,function(e,a){return s("view",{key:a,class:["fea",e.active?"on":""],attrs:{"data-current":e.idx,id:e.id,eventid:"Itd-0-"+a},on:{tap:function(e){t.tapNav(a)}}},[t._v("\n\t\t\t"+t._s(e.name)+"\n\t\t")])})),t._l(t.taskList,function(e,a){return s("scroll-view",{directives:[{name:"show",rawName:"v-show",value:a==t.selectedIndex,expression:"taskIndex==selectedIndex"}],key:a,staticClass:"tasks-container",style:{height:t.content_height+"px"},attrs:{"scroll-y":"",id:"tab"+a,eventid:"jvN-3-"+a},on:{scrolltolower:t.lower}},t._l(e,function(e,i){return s("view",{key:i,staticClass:"task-item"},[s("view",{attrs:{"data-num":t.schools_id,eventid:"xMI-2-"+a+"-"+i},on:{tap:function(s){t.goDetail(e.fault_id)}}},[s("view",{staticClass:"item-header"},[s("view",[s("img",{staticClass:"user-avatar",attrs:{src:e.head_img?e.head_img:"http://tuofu.likonget.com/operation/img/teacher.png"}})]),s("view",{staticClass:"user-item-info"},[s("view",{staticClass:"item-title-row"},[s("view",{staticClass:"user-name"},[s("text",[t._v(t._s(e.nick_name?e.nick_name:"匿名用户"))])]),s("view",{staticClass:"item-subtitle"},[s("text",{staticClass:"baoxiu-room"},[t._v(t._s(e.building_name)+"/"+t._s(e.room_name))])])])]),s("view",{staticClass:"status-inner"},[s("text",{staticClass:"state",class:"status-"+e.tag},[t._v(t._s(e.status_str))])])]),s("view",{staticClass:"baoxiu-content"},[t._v(" "+t._s(e.fault_desc))]),1==e.file_type&&e.imgs.length>0?s("view",{staticClass:"item-images"},t._l(e.imgs,function(n,r){return s("image",{key:r,attrs:{src:n,eventid:"dr0-1-"+a+"-"+i+"-"+r},on:{tap:function(s){s.stopPropagation(),t.changePreview(e.imgs)}}})})):t._e(),0==e.file_type&&e.imgs.length>0?s("view",{staticClass:"video-preview"},[s("image",{attrs:{src:e.preview_img}}),s("view",{staticStyle:{position:"relative"}},[s("view",{staticClass:"play-container"},[s("text",{staticClass:"iconfont icon-play2"})])])]):t._e(),s("view",{staticClass:"detail-site"},[s("text",[t._v(t._s(e.ut))])])])])}))})],2)};a._withStripped=!0;var i={render:a,staticRenderFns:[]};e.a=i}},[23]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/repairs/repairs.js.map